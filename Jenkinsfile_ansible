pipeline {
    agent any
    environment {
        githosturl = "github.com"
    }
    
    stages { 
        stage('clone') {
            steps {
                git credentialsId: 'git_creds', url: 'https://github.com/hrudayhh/jjcfw.git'
            }
        }
        stage('pre-requisites') {
            steps {
                sh '''
                    echo "requirements file"
                    if [ -e roles/requirements.yml ]; then 
                      echo "req file found"
                    else
                      echo "req file not found"
                    fi
                '''
            }
        }
        stage('check urls') {
            steps {
                script {
                    def text = "some text to match"
                    def m = text =~ /match/                                           
                    //assert m instanceof Matcher                                       
                    if (!m.find(0)) {                                                         
                        throw new RuntimeException("Oops, text not found!")
                    }
                }
            }
        }
    }
}
